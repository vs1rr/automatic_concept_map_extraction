Castles were built in Europe during Medieval times as fortified structures for lords and nobles. They served as symbols of power, residences, and defenses against foreign invaders. The emergence of a social and military elite in the Carolingian Empire led to the construction of castles in the 9th and 10th centuries. Initially made of wood, castles later evolved to be constructed of stone for greater fortification. The keep, a strong tower within the castle, served as a last refuge if outer defenses fell. Castles were ruled by lords or nobles and were heavily guarded fortresses. They differed from palaces, which were built for luxury and not fortified. Moats were defensive ditches used to hinder enemy access. Castles provided an advantage in warfare by allowing defenders to stay protected within the walls.